<div class="breadcrumb">
  <a href="index.html">Home</a>
  <span>/</span>
  <span>All Routes</span>
</div>

<div class="card">
  <div class="card-header">
    <h2 class="card-title">All Routes</h2>
    <span class="badge badge-any"><%= routes_count %> total</span>
  </div>

  <% if routes.any? %>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Method</th>
            <th>Path</th>
            <th>Controller#Action</th>
            <th>Parameters</th>
          </tr>
        </thead>
        <tbody>
          <% routes.each do |controller, data| %>
            <% data[:routes].each do |route| %>
              <tr>
                <td>
                  <span class="badge badge-<%= route.verb.downcase.split('|').first %>">
                    <%= route.verb %>
                  </span>
                </td>
                <td><code><%= route.path %></code></td>
                <td>
                  <a href="controllers/<%= controller.gsub('/', '_') %>.html" class="link">
                    <%= controller %>#<%= route.action %>
                  </a>
                </td>
                <td>
                  <% all_params = [] %>
                  <% all_params += route.path_params if route.path_params&.any? %>
                  <% verb = route.verb.to_s.upcase %>
                  <% if %w[GET DELETE].include?(verb) %>
                    <% all_params += route.query_params if route.query_params&.any? %>
                  <% elsif %w[POST PUT PATCH].include?(verb) %>
                    <% all_params += route.request_body_params if route.request_body_params&.any? %>
                  <% end %>
                  
                  <% if all_params.any? %>
                    <details style="cursor: pointer;">
                      <summary style="color: var(--primary); font-weight: 500;">
                        <%= all_params.size %> parameter<%= all_params.size > 1 ? 's' : '' %>
                      </summary>
                      <div style="margin-top: 0.5rem; padding: 0.75rem; background: var(--bg-secondary); border-radius: 6px; font-size: 0.875rem;">
                        <% all_params.each do |param| %>
                          <div style="margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border);">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
                              <code style="font-weight: 600; color: var(--primary);"><%= param[:name] %></code>
                              <span class="badge" style="font-size: 0.75rem; padding: 0.125rem 0.375rem;"><%= param[:type] %></span>
                              <% if param[:required] %>
                                <span style="color: #dc2626; font-size: 0.75rem; font-weight: 600;">required</span>
                              <% else %>
                                <span style="color: #6b7280; font-size: 0.75rem;">optional</span>
                              <% end %>
                            </div>
                            <div style="color: #6b7280; font-size: 0.75rem;">
                              Location: <%= param[:location] %>
                            </div>
                          </div>
                        <% end %>
                      </div>
                    </details>
                  <% else %>
                    <span style="color: #6b7280;">No parameters</span>
                  <% end %>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="empty-state">No routes found</div>
  <% end %>
</div>
